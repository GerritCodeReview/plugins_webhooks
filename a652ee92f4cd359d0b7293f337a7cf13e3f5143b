{
  "comments": [
    {
      "key": {
        "uuid": "ec321a8a_b1516048",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/webhooks/EventHandler.java",
        "patchSetId": 4
      },
      "lineNbr": 81,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2017-10-11T09:28:16Z",
      "side": 1,
      "message": "Why do you actually need to check shouldProcess before submitting a post task (line 87)?\nBefore your change the PostTask.Factory was only accepting a JSON body, but now it accepts a processor (EventProcessor) which can check shouldProcess on its own.",
      "range": {
        "startLine": 80,
        "startChar": 0,
        "endLine": 81,
        "endChar": 29
      },
      "revId": "a652ee92f4cd359d0b7293f337a7cf13e3f5143b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "46d1cdd1_fc196c6f",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/webhooks/EventHandler.java",
        "patchSetId": 4
      },
      "lineNbr": 81,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2017-10-11T12:37:52Z",
      "side": 1,
      "message": "This all could be just (see my comment [1] at the left hand side):\n\n  post(url, projectEvent);\n\nAs already wrote in another comment, I believe that you only need to provide custom\nimplementations of the PostTask.Factory. EventProcessor and EventProcessor.Factory seem like\nunnecessary.",
      "parentUuid": "ec321a8a_b1516048",
      "range": {
        "startLine": 80,
        "startChar": 0,
        "endLine": 81,
        "endChar": 29
      },
      "revId": "a652ee92f4cd359d0b7293f337a7cf13e3f5143b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4fe5c003_aa227759",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/webhooks/EventHandler.java",
        "patchSetId": 4
      },
      "lineNbr": 81,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2017-10-16T11:03:02Z",
      "side": 1,
      "message": "will give it a try and see how that works ;)",
      "parentUuid": "46d1cdd1_fc196c6f",
      "range": {
        "startLine": 80,
        "startChar": 0,
        "endLine": 81,
        "endChar": 29
      },
      "revId": "a652ee92f4cd359d0b7293f337a7cf13e3f5143b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f32d77de_d2c12d00",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/webhooks/EventHandler.java",
        "patchSetId": 4
      },
      "lineNbr": 81,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2017-10-16T11:03:02Z",
      "side": 1,
      "message": "I would say that it is fast enough to happen in main thread without passing all requests through executor, but on the other hand that should increase the overall throughput so I will consider it ;)",
      "parentUuid": "ec321a8a_b1516048",
      "range": {
        "startLine": 80,
        "startChar": 0,
        "endLine": 81,
        "endChar": 29
      },
      "revId": "a652ee92f4cd359d0b7293f337a7cf13e3f5143b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "77313e83_a4282b8e",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/webhooks/EventProcessor.java",
        "patchSetId": 4
      },
      "lineNbr": 23,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2017-10-11T09:28:16Z",
      "side": 1,
      "message": "remoteSubsectionName?",
      "range": {
        "startLine": 23,
        "startChar": 65,
        "endLine": 23,
        "endChar": 69
      },
      "revId": "a652ee92f4cd359d0b7293f337a7cf13e3f5143b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "822cef64_eb190f14",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/webhooks/EventProcessor.java",
        "patchSetId": 4
      },
      "lineNbr": 28,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2017-10-11T07:59:11Z",
      "side": 1,
      "message": "I cannot follow this API.\n\nAn EventProcessor should process events. When process or shouldProcess method is called, which event it refers to?\n\nI don\u0027t consider the Factory as part of this API. Looking at the EventProcessor interface there is no method which references an Event. It is strange to have an API called FooProcessor and not refer to Foo anywhere in its API.\n\nShould one event processor be able to process more than one event? If not, why not?",
      "range": {
        "startLine": 26,
        "startChar": 1,
        "endLine": 28,
        "endChar": 19
      },
      "revId": "a652ee92f4cd359d0b7293f337a7cf13e3f5143b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c262a842_0fad54b5",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/webhooks/EventProcessor.java",
        "patchSetId": 4
      },
      "lineNbr": 28,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2017-10-16T11:03:02Z",
      "side": 1,
      "message": "IMHO there is nothing inherently bad in such approach e.g. Runnable, Provider interface are another examples of it. One creates instance with all necessary details and that instance is responsible for dragging it from the beginning to the end. IOW this is stateless vs stateful instance approach. As I have already written it has some benefits to have stateful instance as the same decision about who is handling event (again this is the problem for multiple webhooks that I have) doesn\u0027t have to be taken 2 times.",
      "parentUuid": "822cef64_eb190f14",
      "range": {
        "startLine": 26,
        "startChar": 1,
        "endLine": 28,
        "endChar": 19
      },
      "revId": "a652ee92f4cd359d0b7293f337a7cf13e3f5143b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d4673c70_006f10e4",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/webhooks/PostTask.java",
        "patchSetId": 4
      },
      "lineNbr": 35,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2017-10-11T12:37:52Z",
      "side": 1,
      "message": "With your use-case in mind, I believe that the only thing you need is to provide custom PostTask.Factory implementation(s). Therefore, this could be:\n\n  PostTask create(@Assisted(\"url\") String url, ProjectEvent event);\n\nHaving said that see also my comment [1] in the EventHandler.",
      "revId": "a652ee92f4cd359d0b7293f337a7cf13e3f5143b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "701ed592_41311ad9",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/webhooks/PostTask.java",
        "patchSetId": 4
      },
      "lineNbr": 35,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2017-10-16T11:03:02Z",
      "side": 1,
      "message": "Will give this a try and see how that works ;)",
      "parentUuid": "d4673c70_006f10e4",
      "revId": "a652ee92f4cd359d0b7293f337a7cf13e3f5143b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}